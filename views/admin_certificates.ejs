<!DOCTYPE html>
<html lang="it">
<head>
	<title>Amministrazione certificati</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="/css/admin_panel.css">
	<link rel="stylesheet" href="/css/materialize.min.css">
	<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
	<script src="/js/admin_certificates_script.js" type="text/javascript"></script>
</head>
<body>

	<%- include ('bar.ejs') %>

	<div class="container">
	<h4 class="flow-text">In questa sezione puoi inserire i certificati o l'abbonamento</h4>
	
	<!-- COLLAPSIBLE -->
	<ul class="collapsible black-text grey lighten-2">
		<li>
			<div class="collapsible-header">
				<i class="material-icons">branding_watermark</i>
				Aggiungi certificato
			</div>
			<div class="collapsible-body">
				<div class="input field">
					<input id="certificate_input" class="validate" type="date">
				</div>
				<div class="input-field">
					<select id="certificate_select">
					 	<option value="" disabled selected>Scegli Atleta:</option>
						<% if (users){ %>
							<% for (var i in users) { %>
								<option value="<%= users[i].id %>_<%= users[i].name %>_<%= users[i].surname %>"><%= users[i].name %> <%= users[i].surname %></option>
							<% } %>
						<% } %>
					</select>
				</div>
				<button id="certificate_btn" class="btn waves-effect waves-light deep-orange darken-3">Inserisci certificato</button>
			</div>
		</li>
		<li>
			<div class="collapsible-header">
				<i class="material-icons">assignment</i>
				Aggiungi abbonamento
			</div>
			<div class="collapsible-body">
				<div class="input field">
					<input id="subscription_input" class="validate" type="date">
				</div>
				<div class="input-field">
					<select id="subscription_select">
						<option value="" disabled selected>Scegli Atleta:</option>
						<% if (users) { %>
							<% for (var i in users) { %>
								<option value="<%= users[i].id %>_<%= users[i].name %>_<%= users[i].surname %>"><%= users[i].name %> <%= users[i].surname %></option>
							<% } %>
						<% } %>
					</select>
				</div>
				<button id="subscription_btn" class="btn waves-effect waves-light deep-orange darken-3" >Inserisci abbonamento</button>
			</div>
		</li>
	</ul>

	<h4 class="flow-text">In questa sezione potrai vedere abbonamenti e certificati per ogni utente</h4>
	<table class="centered striped">
		<thead class="blue-grey darken-3">
			<tr>
				<th>Nome</th>
				<th>Cognome</th>
				<th>Certificato</th>
				<th>Abbonamento</th>
				<th></th>
			</tr>
		</thead>
		<tbody class="grey lighten-1">
			<% if (certificates) { %>
				<% for (var i in certificates) { %>
					<tr>
						<td><%= certificates[i].name %></td>
						<td><%= certificates[i].surname %></td>
						<% if(certificates[i].certificate) { %>
							<td><%= certificates[i].certificate %></td>
						<% } else { %>
							<td>Non inserito</td>
						<% } %>

						<% if(certificates[i].subscription) { %>
							<td><%= certificates[i].subscription %></td>
						<% } else { %>
							<td>Non inserito</td>
						<% } %>
						<td><button id="<%= certificates[i].id %>" class="remove-btn btn waves-effect waves-light deep-orange darken-3"><i class="material-icons">delete</i></button></td>
					</tr>
				<% } %>
			<% } %>
		</tbody>
	</table>
	</div>

	<%- include ('admin_button.ejs') %>

	<script type="text/javascript" src="/js/materialize.min.js"></script>
</body>
</html>